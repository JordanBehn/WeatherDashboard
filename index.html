<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="style.css" /> -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
</head>

<body>
    <header class="jumbotron">
        <h1>Weather Dashboard</h1>
        <!-- <p class="lead">Welcome to your weather dashboard.</p> -->
        <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
        <div class="row">
            <p>Enter a city to get a forecast!</p>
            <input id="cityInput" type="text" placeholder="Enter city name">
            <button id="search" type="submit"></button>
            <p>Previous Searches</p>
            <div id="cityPrevious"></div>

        </div>
        <div class="row">
            <div class="row">
                <div class="col">
                    <div id="city"></div>
                    <div id="temp"></div>
                    <div id="humidity"></div>
                    <div id="wind"></div>
                    <div id="uv-index"></div>
                </div>
            </div>
            <div class="row">
                <div class="col-2 day-1">
                    <div class="date"></div>
                    <div class="icon"></div>
                    <div class="temp-forecast"></div>
                    <div class="humid"></div>
                </div>
                <div class="col-2 day-2">
                    <div class="date"></div>
                    <div class="icon"></div>
                    <div class="temp-forecast"></div>
                    <div class="humid"></div>
                </div>
                <div class="col-2 day-3">
                    <div class="date"></div>
                    <div class="icon"></div>
                    <div class="temp-forecast"></div>
                    <div class="humid"></div>
                </div>
                <div class="col-2 day-4">
                    <div class="date"></div>
                    <div class="icon"></div>
                    <div class="temp-forecast"></div>
                    <div class="humid"></div>
                </div>
                <div class="col-2 day-5">
                    <div class="date"></div>
                    <div class="icon"></div>
                    <div class="temp-forecast"></div>
                    <div class="humid"></div>
                </div>
            </div>


        </div>
    </div>
    <script>
        //get current moment
        var mom = moment().format("dddd, MMMM Do YYYY, h:mm:ss a");
        $("#currentDay").text(mom);
        //on click of button run api call
        $("#search").click(function() {
            let cityInput = $("#cityInput").val();
            let apikey = "87f0c9d5a9813668cae2ebe11bcb2972";
            let queryURL = "http://api.openweathermap.org/data/2.5/forecast?q=" + cityInput + "&units=imperial&appid=" + apikey;
            $.ajax({
                url: queryURL,
                method: "GET"
            }).then(function(response) {
                console.log(response)
                let city = response.city.name;
                let temp = response.list[0].main.temp;
                let humidity = response.list[0].main.humidity;
                let wind = response.list[0].wind.speed;
                //get lat and long for uv index, call uv index
                let lat = response.city.coord.lat;
                let long = response.city.coord.lon;
                console.log(lat);
                console.log(long);
                let uvURL = "http://api.openweathermap.org/data/2.5/uvi?lat=" + lat + "&lon=" + long + "&appid=" + apikey;
                $.ajax({
                    url: queryURL,
                    method: "GET"
                }).then(function(UVresponse) {
                    console.log(UVresponse)
                })
            })
        })
    </script>
</body>

</html>